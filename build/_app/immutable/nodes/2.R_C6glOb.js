import{b as q,t as z}from"../chunks/CjCr2JV8.js";import{y as B,g as Y,r as Vt,s as G,a as H,b as Jt,c as Yt,a9 as K,ar as Gt,l as Ht,as as Kt,D as Nt,x as Qt,Y as Xt,z as $t,L as c,J as g,aq as w,a5 as f,a3 as Zt,a4 as N}from"../chunks/CzKlrKge.js";import{d as te}from"../chunks/Dx_3HIZ5.js";import{i as ee,p as T}from"../chunks/Di6aD5Tk.js";import"../chunks/D1gz14sy.js";let Q,ne=(async()=>{var X=Object.defineProperty,$=(t,e,n)=>e in t?X(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,b=(t,e,n)=>$(t,typeof e!="symbol"?e+"":e,n);function Z(t){B&&Y(t)!==null&&Vt(t)}let C=!1;function tt(){C||(C=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const n of t.target.elements)(e=n.__on_r)==null||e.call(n)})},{capture:!0}))}function et(t){var e=Jt,n=Yt;G(null),H(null);try{return t()}finally{G(e),H(n)}}function nt(t,e,n,r=n){t.addEventListener(e,()=>et(n));const i=t.__on_r;i?t.__on_r=()=>{i(),r(!0)}:t.__on_r=()=>r(!0),tt()}function it(t,e){B&&Ht(Y(t)),K(()=>{var n=e();for(var r in n){var i=n[r];i?t.style.setProperty(r,i):t.style.removeProperty(r)}}),Gt(()=>{t.remove()})}function rt(t,e,n=e){var r=Kt();nt(t,"input",i=>{var o=i?t.defaultValue:t.value;if(o=L(t)?R(o):o,n(o),r&&o!==(o=e())){var s=t.selectionStart,l=t.selectionEnd;t.value=o??"",l!==null&&(t.selectionStart=s,t.selectionEnd=Math.min(l,t.value.length))}}),(B&&t.defaultValue!==t.value||Nt(e)==null&&t.value)&&n(L(t)?R(t.value):t.value),K(()=>{var i=e();L(t)&&i===R(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function L(t){var e=t.type;return e==="number"||e==="range"}function R(t){return t===""?null:+t}const st=""+new URL("../assets/basic_bot_script_bg.CtLdMD2l.wasm",import.meta.url).href,_t=async(t={},e)=>{let n;if(e.startsWith("data:")){const r=e.replace(/^data:.*?base64,/,"");let i;if(typeof Buffer=="function"&&typeof Buffer.from=="function")i=Buffer.from(r,"base64");else if(typeof atob=="function"){const o=atob(r);i=new Uint8Array(o.length);for(let s=0;s<o.length;s++)i[s]=o.charCodeAt(s)}else throw new Error("Cannot decode base64-encoded data URL");n=await WebAssembly.instantiate(i,t)}else{const r=await fetch(e),i=r.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&i.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(r,t);else{const o=await r.arrayBuffer();n=await WebAssembly.instantiate(o,t)}}return n.instance.exports};let _;function ot(t){_=t}const at=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let O=new at("utf-8",{ignoreBOM:!0,fatal:!0});O.decode();let m=null;function h(){return(m===null||m.byteLength===0)&&(m=new Uint8Array(_.memory.buffer)),m}function lt(t,e){return t=t>>>0,O.decode(h().subarray(t,t+e))}let k=0;const ct=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let v=new ct("utf-8");const ut=typeof v.encodeInto=="function"?function(t,e){return v.encodeInto(t,e)}:function(t,e){const n=v.encode(t);return e.set(n),{read:t.length,written:n.length}};function gt(t,e,n){if(n===void 0){const l=v.encode(t),d=e(l.length,1)>>>0;return h().subarray(d,d+l.length).set(l),k=l.length,d}let r=t.length,i=e(r,1)>>>0;const o=h();let s=0;for(;s<r;s++){const l=t.charCodeAt(s);if(l>127)break;o[i+s]=l}if(s!==r){s!==0&&(t=t.slice(s)),i=n(i,r,r=s+t.length*3,1)>>>0;const l=h().subarray(i+s,i+r),d=ut(t,l);s+=d.written,i=n(i,r,s,1)>>>0}return k=s,i}const P=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>_.__wbg_bot_free(t>>>0,1));class y{static __wrap(e){e=e>>>0;const n=Object.create(y.prototype);return n.__wbg_ptr=e,P.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,P.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_bot_free(e,0)}static new(e){const n=gt(e,_.__wbindgen_malloc,_.__wbindgen_realloc),r=k,i=_.bot_new(n,r);return y.__wrap(i)}tick(){_.bot_tick(this.__wbg_ptr)}get_state(e){const n=_.bot_get_state(this.__wbg_ptr,e);return A.__wrap(n)}}const U=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>_.__wbg_position_free(t>>>0,1));class A{static __wrap(e){e=e>>>0;const n=Object.create(A.prototype);return n.__wbg_ptr=e,U.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,U.unregister(this),e}free(){const e=this.__destroy_into_raw();_.__wbg_position_free(e,0)}get x(){return _.__wbg_get_position_x(this.__wbg_ptr)}set x(e){_.__wbg_set_position_x(this.__wbg_ptr,e)}get y(){return _.__wbg_get_position_y(this.__wbg_ptr)}set y(e){_.__wbg_set_position_y(this.__wbg_ptr,e)}get dir(){return _.__wbg_get_position_dir(this.__wbg_ptr)}set dir(e){_.__wbg_set_position_dir(this.__wbg_ptr,e)}}function bt(){const t=_.__wbindgen_export_0,e=t.grow(4);t.set(0,void 0),t.set(e+0,void 0),t.set(e+1,null),t.set(e+2,!0),t.set(e+3,!1)}function dt(t,e){throw new Error(lt(t,e))}URL=globalThis.URL;const a=await _t({"./basic_bot_script_bg.js":{__wbindgen_throw:dt,__wbindgen_init_externref_table:bt}},st),wt=a.memory,pt=a.__wbg_bot_free,ft=a.__wbg_position_free,mt=a.__wbg_get_position_x,ht=a.__wbg_set_position_x,vt=a.__wbg_get_position_y,yt=a.__wbg_set_position_y,xt=a.__wbg_get_position_dir,Tt=a.__wbg_set_position_dir,Lt=a.bot_new,Rt=a.bot_tick,kt=a.bot_get_state,At=a.__wbindgen_export_0,Ft=a.__wbindgen_malloc,St=a.__wbindgen_realloc,W=a.__wbindgen_start,Et=Object.freeze(Object.defineProperty({__proto__:null,__wbg_bot_free:pt,__wbg_get_position_dir:xt,__wbg_get_position_x:mt,__wbg_get_position_y:vt,__wbg_position_free:ft,__wbg_set_position_dir:Tt,__wbg_set_position_x:ht,__wbg_set_position_y:yt,__wbindgen_export_0:At,__wbindgen_malloc:Ft,__wbindgen_realloc:St,__wbindgen_start:W,bot_get_state:kt,bot_new:Lt,bot_tick:Rt,memory:wt},Symbol.toStringTag,{value:"Module"}));ot(Et),W();var jt=z('<div class="bot relative h-10 w-10 rounded-r-full bg-blue-300 svelte-1qf1mx8"></div>');function qt(t){var e=jt();q(t,e)}class zt{constructor(e,n){b(this,"LastFrameTime",0),b(this,"accumulatedTime",0),b(this,"timeStep",1e3),b(this,"rafid",null),b(this,"isRunning",!1),b(this,"Tick"),b(this,"Render"),b(this,"mainLoop",r=>{if(!this.isRunning)return;let i=r-this.LastFrameTime;for(this.LastFrameTime=r,this.accumulatedTime+=i;this.accumulatedTime>=this.timeStep;)this.Tick(),this.accumulatedTime-=this.timeStep;this.Render(this.accumulatedTime/this.timeStep),requestAnimationFrame(this.mainLoop)}),this.Tick=e,this.Render=n}start(){this.isRunning||(this.isRunning=!0,this.LastFrameTime=document.timeline.currentTime,this.rafid=requestAnimationFrame(this.mainLoop))}stop(){this.rafid&&cancelAnimationFrame(this.rafid),this.isRunning=!1}}const Bt=(t,e,n)=>{c(e)&&(c(e).free(),g(e,void 0)),g(e,T(y.new(c(n))))};var Ct=(t,e)=>{e.start()},Ot=(t,e)=>{e.stop()},Pt=z('<div class="h-5 w-5 bg-red-950"></div>'),Ut=z('<button class="m-2 rounded bg-white p-1 shadow-lg">start</button> <button class="m-2 rounded bg-white p-1 shadow-lg">stop</button> <button class="m-2 rounded bg-white p-1 shadow-lg">Make Bot</button> <div class="m-2 flex flex-row"><textarea name="code"></textarea> <!></div> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);Q=function(t,e){Qt(e,!0);let n=w(""),r=w(0),i=w(0),o=w(void 0),s=w(0),l=w(void 0);const d=u=>{var x;g(s,c(s)+5);let p=(x=c(l))==null?void 0:x.get_state(u);p&&(g(r,T(p.x)),g(i,T(p.y)),g(o,T(p.dir)),p.free(),p=void 0)};let F=w(!1);const Wt=()=>{g(F,!0),setTimeout(()=>{g(F,!1)},50)},Dt=()=>{var u;Wt(),(u=c(l))==null||u.tick()};let D=new zt(Dt,d);var M=Ut(),I=Xt(M);I.__click=[Ct,D];var V=f(I,2);V.__click=[Ot,D];var J=f(V,2);J.__click=[Bt,l,n];var S=f(J,2),E=Zt(S);Z(E);var Mt=f(E,2);{var It=u=>{var x=Pt();q(u,x)};ee(Mt,u=>{c(F)&&u(It)})}N(S);var j=f(S,2);it(j,()=>({"--x":c(r)+"px","--y":c(i)+"px","--dir":c(o)+"rad"})),qt(j.lastChild),N(j),rt(E,()=>c(n),u=>g(n,u)),q(t,M),$t()},te(["click"])})();export{ne as __tla,Q as component};
